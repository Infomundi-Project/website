{% extends "base.html" %}{% block title %}Testing Page{% endblock %}
{% block styles %}
<style type="text/css">
    .header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    .header img {
      width: 100px;
      height: 100px;
      border-radius: 10px;
      margin-right: 10px;
    }
    .content {
      position: relative;
      border-radius: 10px;
      border: 1px solid #ddd;
      height: 200px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }
    .blurred-text {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      color: #6c757d;
      font-size: 16px;
      filter: blur(5px);
      user-select: none; /* Prevents text selection */
      pointer-events: none; /* Prevents interactions */
      white-space: pre-wrap; /* Ensures text wraps properly */
    }
    .progress {
      width: 80%;
      position: absolute;
      bottom: 100px;
    }
</style>
{% endblock %}
{% block content %}


<div class="container my-4 p-4">
  <div class="maximus">
    <!-- Header Section -->
    <div class="header row align-items-start">
      <div class="col-auto mt-2">
        <img src="{{ url_for('static', filename='img/illustrations/maximus.webp') }}" alt="Profile Picture" class="border border-3 p-2">
      </div>
      <div class="col-6">
        <span class="fs-3">MAXIMUS</span><span class="ms-3 small text-uppercase">Infomundi's AI</span>
        <div class="mt-3 mb-3 border rounded">
          <ul class="text-muted p-3 ms-3"><li>Maximus is powered by GPT 4.0</li><li>He'll access the story and gather important content</li><li>He'll separate the information in three: <strong>Important topics</strong>, <strong>context behind it</strong>, and <strong>where can I find more information</strong>.</li></ul>
        </div>
      </div>

    </div>
    <!-- Content Section -->
    <div class="content">
      <!-- Blurred Text -->
      <p class="blurred-text" id="blurred-text"></p>
      <!-- Progress Bar -->
      <div class="progress">
        <div class="progress-bar progress-bar-striped bg-primary" role="progressbar" style="width: 0%;" id="progress-bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>
  </div>
</div>

{% endblock %}


{% block scripts %}
<script nonce="{{ nonce }}">
const loremIpsum =
      `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam tristique dui nec ipsum varius luctus. In hendrerit molestie ante, vel imperdiet quam porta eget. Sed sodales aliquet lectus, quis suscipit dolor malesuada non. Aliquam a leo id arcu sodales sagittis. Praesent porttitor luctus hendrerit. Pellentesque sollicitudin diam gravida, sodales ante pulvinar, iaculis quam. Duis neque nisi, volutpat sit amet pretium vitae, ultricies sit amet urna. Vivamus vel nisi elit. Maecenas dapibus, ipsum eleifend posuere consectetur, neque nisl pulvinar turpis, eu eleifend nulla mauris vel leo. Proin a urna facilisis, accumsan orci et, ultricies dolor. Phasellus ut viverra dolor. Morbi mattis ligula nunc, non varius orci vehicula ac. Sed et faucibus diam. Duis et diam massa.`;
    const textElement = document.getElementById("blurred-text");
    const progressBar = document.getElementById("progress-bar");
    const totalCharacters = loremIpsum.length;
    const progressRate = 1; // Number of characters for 1% progress
    let currentIndex = 0;

    function typeText() {
      if (currentIndex < totalCharacters) {
        // Append the next character to the text
        textElement.textContent += loremIpsum[currentIndex];
        currentIndex++;

        // Update the progress bar
        const progress = Math.min((currentIndex / totalCharacters) * 100, 100);
        progressBar.style.width = `${progress}%`;
        progressBar.setAttribute("aria-valuenow", progress.toFixed(0));

        // Continue typing with a delay
        setTimeout(typeText, 15); // Adjust speed
      }
    }

    // Start the typing and progress bar update
    typeText();
</script>
{% endblock %}