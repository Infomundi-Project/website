{% extends "base.html" %} {% block title %}Home{% endblock %}
{% block styles %}
<style type="text/css">
  #chartdiv {
  width: 100%;
  height: 100vh;
  max-width: 100%;
  margin-top: -1.5vh;
  }
  .fa-solid {
  color: #ffffff;
  }
  .infomundi-logo {
  margin-bottom: 20px;
  }
  @media (max-width: 968px) {
  #chartdiv {
  height: 40vh;
  margin-top: 0vh;
  }
  .infomundi-logo {
  max-height: 80%; 
  max-width: 80%;
  }
  }
  .accordion {
  --bs-accordion-btn-bg: #202429;
  --bs-accordion-btn-color: #ffffff;
  --bs-accordion-active-bg: #202429;
  --bs-accordion-active-color: #ffffff;
  --bs-accordion-bg: #131619;
  --bs-accordion-color: #ffffff;
  --bs-accordion-btn-focus-box-shadow: none;
  --bs-accordion-btn-icon: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='#ffffff'><path fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/></svg>");
  }
  .accordion-flush .accordion-button {
  border-top: 1px solid #000000;
  }
  .accordion-flush .accordion-item:last-child .accordion-button.collapsed,
  .accordion-flush .accordion-item:last-child .accordion-body {
  border-bottom: 1px solid #000000;
  }
</style>
{% endblock %}
{% block content %}
<div class="row">
  <div class="col-sm text-center mb-5 mt-4">
    <h1 class="logo-text"><img 
      src="{{ url_for('static', filename='img/raw-infomundi-logo.webp') }}"
      class="infomundi-logo"
      alt="A resilient figure cradling Earth in powerful hands - a testament to strength and global impact."
      height="173"
      width="120" 
      />Infomundi</h1>
    <center>
      <p class="fs-4"><label for="query">Search the country you want to view news</label></p>
      <div class="input-group justify-content-center">
        <span class="input-group-text bg-dark" id="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
        <input 
          class="form-control bg-dark text-light autocomplete" 
          aria-describedby="search-icon"
          style="max-width: 360px;"
          type="search" 
          aria-label="Search Field" 
          id="query" 
          name="query"
          />
      </div>
    </center>
    <p class="fs-4 mt-2 mb-2">or</p>
    <div class="d-inline-flex">
      <p class="fs-3">Use the Globe to Choose</p>
    </div>
    <div class="accordion" id="accordionExample">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
            aria-expanded="true" aria-controls="collapseOne">
          <i class="fa-solid fa-chart-simple"></i><span class="ms-2">Statistics</span>
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse {{ 'show' if not is_mobile else ''}}" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <div class="d-flex flex-row flex-wrap text-start justify-content-between">
              <div class="p-2">
                <p class="fs-4"><i class="fa-solid fa-database"></i> Database</p>
                <p class="fs-6"><i class="fa-solid fa-globe"></i> Countries: {{ statistics['total_countries_supported'] }}</p>
                <p class="fs-6"><i class="fa-solid fa-newspaper"></i> News: {{ statistics['total_news'] }}</p>
                <p class="fs-6"><i class="fa-solid fa-rss"></i> Sources: {{ statistics['total_feeds'] }}</p>
                <p class="fs-6"><i class="fa-solid fa-arrows-rotate"></i> Updated: {{ statistics['last_updated_message'] }}</p>
              </div>
              <div class="p-2">
                <p class="fs-4"><i class="fa-solid fa-users-rectangle"></i> Community</p>
                <p class="fs-6"><i class="fa-solid fa-comments"></i> Comments: {{ statistics['total_comments'] }}</p>
                <p class="fs-6"><i class="fa-solid fa-eye"></i> Clicks: {{ statistics['total_clicks'] }} (last 7 days)</p>
                <p class="fs-6"><i class="fa-solid fa-code-merge"></i> Version: 1.1.7-dev</p>
                <p class="fs-6 good-blue"><a href="https://github.com/Infomundi-Project" target="_blank" class="text-reset text-decoration-none"><i class="fa-solid fa-arrow-up-right-from-square" style="color: #3666ba;"></i> Latest changelog</a></p>
              </div>
              <div class="p-2">
                <p class="fs-4"><i class="fa-solid fa-user"></i> Session</p>
                
                {% if user.is_authenticated %}
                <p class="fs-6"><i class="fa-solid fa-circle-user"></i> Welcome, {{ user.username }}.</p>
                {% else %}
                <p class="fs-6 good-blue"><a href="{{ url_for('auth.register') }}" class="text-reset text-decoration-none"><i class="fa-solid fa-user-pen" style="color: #3666ba;"></i> Register</a></p>
                <p class="fs-6 good-blue"><a href="{{ url_for('auth.login') }}" class="text-reset text-decoration-none"><i class="fa-solid fa-user-tag" style="color: #3666ba;"></i> Log in</a></p>
                {% endif %}
                
                {% if session_info['last_visited_country'] %}
                <p class="fs-6 good-blue"><a href="{{ session_info['last_visited_country'] }}" class="text-reset text-decoration-none"><i class="fa-solid fa-arrow-up-right-from-square" style="color: #3666ba;"></i> Last visited country</a></p>
                {% endif %}
                {% if session_info['last_visited_news']  %}
                <p class="fs-6 good-blue"><a href="{{ session_info['last_visited_news'] }}" class="text-reset text-decoration-none"><i class="fa-solid fa-arrow-up-right-from-square" style="color: #3666ba;"></i> Last visited news</a></p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm p-3">
    <div id="chartdiv"></div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script defer
  src="https://cdn.amcharts.com/lib/5/index.js"
  ></script>
<script defer
  src="https://cdn.amcharts.com/lib/5/map.js"
  ></script>
<script defer
  src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"
  ></script>
<script defer
  src="https://cdn.amcharts.com/lib/5/themes/Animated.js"
  ></script>
<script defer
  src="{{ url_for('static', filename='js/chart.js') }}"
  ></script>
<script 
  src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js" 
  integrity="sha256-eTyxS0rkjpLEo16uXTS0uVCS4815lc40K2iVpWDvdSY=" 
  crossorigin="anonymous"
  ></script>
<script defer
  src="{{ url_for('static', filename='js/autocomplete.js') }}"
  ></script>
{% endblock %}