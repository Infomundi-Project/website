function submitSearch(){const queryValue=document.getElementById("query").value;const languageButton=document.getElementById("infLanguageMenu");const languageValue=languageButton.textContent.trim().toLowerCase();const currentUrl=new URL(window.location.href);const searchParams=new URLSearchParams(currentUrl.search);searchParams.set("query",queryValue);if(!languageValue.includes('language')){searchParams.set("translation",languageValue);}
currentUrl.search=searchParams.toString();window.location.href=currentUrl.toString();}
document.addEventListener('DOMContentLoaded',(event)=>{document.querySelectorAll('.inf-card-header-link').forEach(button=>{button.addEventListener('click',function(e){e.preventDefault();const card=this.closest('.card');const cardId=card.id.split('-')[0];const newsCategory=card.id.split('-')[1];toggleActiveClass(this);if(this.classList.contains('description-btn')){fetchDescription(cardId,newsCategory,card);}else if(this.classList.contains('comments-btn')){document.cookie="clicked="+cardId+"-"+newsCategory+";path=/";loadComments();}else{updateCardWithPreview(card);}});});});function toggleActiveClass(clickedButton){const navLinks=clickedButton.closest('.inf-card-header').querySelectorAll('.nav-link');navLinks.forEach(link=>link.classList.remove('active'));clickedButton.classList.add('active');}
function fetchDescription(cardId,newsCategory,card){fetch(`/api/get-description?id=${cardId}&category=${newsCategory}`).then(response=>response.json()).then(data=>{updateCardWithDescription(data,card);}).catch(error=>console.error('Error:',error));}
function updateCardWithDescription(data,card){const cardTitle=card.querySelector('.card-title');const cardText=card.querySelector('.card-text');if(cardTitle){cardTitle.style.display='none';}
if(cardText){cardText.style.display='none';}
const cardBody=card.querySelector('.card-body');if(cardBody&&!cardBody.querySelector('.description-text')){cardBody.innerHTML+=`<p class="description-text">${data.description}</p>`;}}
function updateCardWithPreview(card){const cardTitle=card.querySelector('.card-title');const cardText=card.querySelector('.card-text');if(cardTitle){cardTitle.style.display='block';}
if(cardText){cardText.style.display='block';}
const cardBody=card.querySelector('.card-body');if(cardBody){const descriptionElement=cardBody.querySelector('.description-text');if(descriptionElement){descriptionElement.remove();}}}
document.querySelectorAll('.inf-language-menu a').forEach(item=>{item.addEventListener('click',(e)=>{e.preventDefault();var dropdownButton=document.getElementById('infLanguageMenu');dropdownButton.textContent=e.target.textContent;});});